<!-- Full HTML content with suspects, question modal, complete timeline section, and killer guess section restored -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mystery Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-4xl font-bold text-center mb-4">üîç Murder Mystery Game</h1>

    <!-- Case Introduction -->
    <section class="mb-10 bg-white p-6 rounded shadow">
      <h2 class="text-2xl font-semibold mb-2">The Case</h2>
      <p class="text-gray-700">
        Last night at 8:00 PM, Mr. Blackwell was found dead in the study. Witnesses reported a power outage
        at exactly 7:47 PM, followed by a scream moments later. Ten individuals were in the house at the time.
        Your mission is to gather information, reconstruct the killer‚Äôs timeline, and correctly identify the murderer.
      </p>
    </section>

    <!-- Suspect Section -->
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">Suspects</h2>
      <div class="grid grid-cols-2 md:grid-cols-5 gap-4" id="suspect-grid"></div>
    </section>

    <!-- Question Modal -->
    <div id="question-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
      <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-xl">
        <h3 class="text-xl font-bold mb-4" id="modal-title">Question Suspect</h3>
        <ul id="modal-word-bank" class="flex gap-2 flex-wrap p-4 bg-gray-100 rounded mb-4 min-h-[60px]"></ul>
        <button onclick="checkModalQuestion()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Check</button>
        <p id="modal-result" class="mt-2 font-bold"></p>
        <button id="next-question-btn" onclick="nextModalQuestion()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded hidden">Next Question</button>
        <button onclick="closeModal()" class="mt-4 text-sm text-red-500 underline">Close</button>
      </div>
    </div>

    <!-- Timeline and Killer Guess -->
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">Reconstruct the Killer's Timeline</h2>
      <p class="mb-2 text-gray-600">Use the clues to fill in the blanks in the killer‚Äôs timeline (between 7:40 PM and 8:00 PM):</p>
      <form id="timeline-form" class="bg-white rounded-lg shadow p-4 space-y-4">
        <div><label class="block font-semibold">7:40 PM</label><input type="text" class="w-full p-2 border border-gray-300 rounded" placeholder="What happened?" id="time1"></div>
        <div><label class="block font-semibold">7:42 PM</label><input type="text" class="w-full p-2 border border-gray-300 rounded" placeholder="What happened?" id="time2"></div>
        <div><label class="block font-semibold">7:47 PM</label><input type="text" class="w-full p-2 border border-gray-300 rounded" placeholder="What happened?" id="time3"></div>
        <div><label class="block font-semibold">7:50 PM</label><input type="text" class="w-full p-2 border border-gray-300 rounded" placeholder="What happened?" id="time4"></div>
        <div><label class="block font-semibold">8:00 PM</label><input type="text" class="w-full p-2 border border-gray-300 rounded" placeholder="What happened?" id="time5"></div>
        <button type="button" onclick="checkTimeline()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Check Timeline</button>
        <p id="timeline-result" class="mt-2 font-bold"></p>
      </form>
    </section>

    <!-- Killer Guess Section -->
    <section class="mb-10">
      <h2 class="text-2xl font-semibold mb-4">Who is the Killer?</h2>
      <p class="text-gray-600 mb-2">Choose the person you believe committed the crime based on your investigation:</p>
      <select id="killer-guess" class="w-full max-w-xs p-2 border border-gray-300 rounded">
        <option value="">-- Select a suspect --</option>
        <option>Alice</option>
        <option>Bob</option>
        <option>Clara</option>
        <option>David</option>
        <option>Eva</option>
        <option>Frank</option>
        <option>Gina</option>
        <option>Harry</option>
        <option>Isla</option>
        <option>Jake</option>
      </select>
      <button onclick="checkKillerGuess()" class="mt-4 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Submit Guess</button>
      <p id="killer-result" class="mt-2 font-bold"></p>
    </section>
  </div>

  <script>
    const suspects = [
      {
        name: 'Alice',
        job: 'Chef',
        responses: {
          q1: 'At 7:40 PM, I was chopping vegetables in the kitchen.',
          q2: 'At 7:42 PM, I saw Clara rushing toward the study.',
          q3: 'At 7:47 PM, I heard a scream and the lights went out.',
          q4: 'At 7:50 PM, I ran to the hall to check what happened.'
        }
      },
      {
        name: 'Bob',
        job: 'Gardener',
        responses: {
          q1: 'At 7:40 PM, I was in the greenhouse.',
          q2: 'At 7:42 PM, I saw no one.',
          q3: 'At 7:47 PM, I heard a loud thud.',
          q4: 'At 7:50 PM, I went inside to check the noise.'
        }
      },
      {
        name: 'Clara',
        job: 'Teacher',
        responses: {
          q1: 'At 7:40 PM, I was in the lounge reading a book.',
          q2: 'At 7:42 PM, I saw no one. It was very quiet.',
          q3: 'At 7:47 PM, I was still reading ‚Äî nothing unusual happened.',
          q4: 'At 7:50 PM, I was preparing some tea in the kitchen.'
        }
      },
      {
        name: 'David',
        job: 'Driver',
        responses: {
          q1: 'At 7:40 PM, I was cleaning the car.',
          q2: 'At 7:42 PM, I saw Eva coming from upstairs.',
          q3: 'At 7:47 PM, I heard glass breaking.',
          q4: 'At 7:50 PM, I stayed in the garage.'
        }
      },
      {
        name: 'Eva',
        job: 'Doctor',
        responses: {
          q1: 'At 7:40 PM, I was organizing the first-aid kit.',
          q2: 'At 7:42 PM, I saw Jake moving toward the lounge.',
          q3: 'At 7:47 PM, I heard a scream and dropped a glass.',
          q4: 'At 7:50 PM, I cleaned up the mess.'
        }
      },
      {
        name: 'Frank',
        job: 'Musician',
        responses: {
          q1: 'At 7:40 PM, I was tuning my guitar.',
          q2: 'At 7:42 PM, I saw Clara with something in her hand.',
          q3: 'At 7:47 PM, I heard the lights click off and a scream.',
          q4: 'At 7:50 PM, I stayed in the music room.'
        }
      },
      {
        name: 'Gina',
        job: 'Librarian',
        responses: {
          q1: 'At 7:40 PM, I was cataloging books.',
          q2: 'At 7:42 PM, I heard someone in the hallway.',
          q3: 'At 7:47 PM, I saw the lights flicker and heard a scream.',
          q4: 'At 7:50 PM, I stayed in the library.'
        }
      },
      {
        name: 'Harry',
        job: 'Baker',
        responses: {
          q1: 'At 7:40 PM, I was kneading dough.',
          q2: 'At 7:42 PM, I saw no one.',
          q3: 'At 7:47 PM, I heard a loud bang.',
          q4: 'At 7:50 PM, I looked out the window.'
        }
      },
      {
        name: 'Isla',
        job: 'Student',
        responses: {
          q1: 'At 7:40 PM, I was reading in the lounge.',
          q2: 'At 7:42 PM, I saw Clara walking quickly.',
          q3: 'At 7:47 PM, I heard a scream and the lights went out.',
          q4: 'At 7:50 PM, I found the body.'
        }
      },
      {
        name: 'Jake',
        job: 'Painter',
        responses: {
          q1: 'At 7:40 PM, I was washing brushes.',
          q2: 'At 7:42 PM, I passed by the music room.',
          q3: 'At 7:47 PM, I heard something fall upstairs.',
          q4: 'At 7:50 PM, I was back in the art studio.'
        }
      }
    ];

    const allQuestions = [
      'Where were you at 7:40 PM?',
      'What did you see at 7:42 PM?',
      'What happened at 7:47 PM?',
      'Where were you at 7:50 PM?'
    ];

    let currentSuspect = null;
    let currentQuestionIndex = 0;

    const suspectGrid = document.getElementById('suspect-grid');
    suspects.forEach((s) => {
      const div = document.createElement('div');
      div.className = 'bg-white p-4 rounded shadow text-center cursor-pointer hover:bg-blue-100';
      div.onclick = () => openModal(s);
      div.innerHTML = `<h3 class="font-bold text-lg">${s.name}</h3><p class="text-sm text-gray-600">${s.job}</p>`;
      suspectGrid.appendChild(div);
    });

    function openModal(suspect) {
      currentSuspect = suspect;
      currentQuestionIndex = 0;
      document.getElementById('modal-result').textContent = '';
      loadModalQuestion();
      document.getElementById('question-modal').classList.remove('hidden');
    }

    function loadModalQuestion() {
      document.getElementById('modal-title').textContent = `Ask ${currentSuspect.name}: Question ${currentQuestionIndex + 1}`;
      const bank = document.getElementById('modal-word-bank');
      bank.innerHTML = '';
      document.getElementById('next-question-btn').classList.add('hidden');

      const selectedWords = allQuestions[currentQuestionIndex].split(' ');
      shuffle(selectedWords);
      selectedWords.forEach(word => {
        const li = document.createElement('li');
        li.textContent = word;
        li.className = 'px-3 py-2 bg-blue-100 rounded cursor-move';
        bank.appendChild(li);
      });
      Sortable.create(bank, { animation: 150 });
    }

    function checkModalQuestion() {
      const words = [...document.getElementById('modal-word-bank').children].map(li => li.textContent);
      const userQuestion = words.join(' ');
      const expected = allQuestions[currentQuestionIndex];
      const result = document.getElementById('modal-result');
      if (userQuestion === expected) {
        const answer = currentSuspect.responses[`q${currentQuestionIndex + 1}`];
        result.textContent = `‚úÖ ${currentSuspect.name} says: "${answer}"`;
        document.getElementById('next-question-btn').classList.remove('hidden');
      } else {
        result.textContent = '‚ùå Try again.';
      }
    }

    function nextModalQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex >= allQuestions.length) {
        closeModal();
      } else {
        document.getElementById('modal-result').textContent = '';
        loadModalQuestion();
      }
    }

    function closeModal() {
      document.getElementById('question-modal').classList.add('hidden');
    }

    function checkTimeline() {
      const expected = [
        'Clara turned off the lights from the circuit box.',
        'Clara entered the study with a blunt object.',
        'A scream was heard.',
        'Clara ran out and disposed of the weapon.',
        'The body was discovered by Isla.'
      ];

      const userAnswers = [
        document.getElementById('time1').value.trim(),
        document.getElementById('time2').value.trim(),
        document.getElementById('time3').value.trim(),
        document.getElementById('time4').value.trim(),
        document.getElementById('time5').value.trim()
      ];

      const result = document.getElementById('timeline-result');
      const isCorrect = userAnswers.every((ans, i) => ans.toLowerCase() === expected[i].toLowerCase());

      result.textContent = isCorrect
        ? '‚úÖ Timeline is correct!'
        : '‚ùå Some entries are incorrect. Try again.';
    }

    function checkKillerGuess() {
      const guess = document.getElementById("killer-guess").value;
      const result = document.getElementById("killer-result");
      result.textContent = guess === "Clara"
        ? `‚úÖ Correct! ${guess} is the killer.`
        : `‚ùå Incorrect. ${guess} is not the killer.`;
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }
</script>
</body>
</html>
